# Проект по сбору вакансий с HH.ru

## Описание проекта

Данный проект предназначен для сбора данных о компаниях и их вакансиях с сайта HeadHunter (hh.ru) с использованием публичного API. Полученные данные сохраняются в базе данных PostgreSQL, а затем предоставляется удобный интерфейс для их анализа.

---

## Функциональность

Проект выполняет следующие задачи:

* **Сбор данных:** Автоматический сбор информации о 10 выбранных компаниях и всех их вакансиях с помощью API hh.ru.
* **Управление базой данных:** Автоматическое создание и заполнение таблиц `companies` и `vacancies` в PostgreSQL. Таблицы связаны между собой через внешний ключ.
* **Анализ данных:** Предоставляется интерактивный интерфейс, позволяющий:
    * Получить количество вакансий у каждой компании.
    * Показать все вакансии с указанием зарплаты и ссылки.
    * Вычислить среднюю зарплату по всем вакансиям.
    * Найти вакансии с зарплатой выше средней.
    * Искать вакансии по ключевому слову в названии.

---

## Технологии

Проект разработан с использованием следующих технологий и библиотек:

* **Python 3.11+**
* **PostgreSQL**
* **requests:** Для взаимодействия с API.
* **psycopg2:** Для работы с базой данных PostgreSQL.
* **python-dotenv:** Для безопасного хранения переменных окружения.
* **unittest:** Для написания и запуска тестов.

---

## Установка и настройка

1.  **Клонирование репозитория:**
    ```bash
    git clone [https://github.com/your_username/hh_sql.git](https://github.com/your_username/hh_sql.git)
    cd hh_sql
    ```
    *(Замените `your_username` и `hh_sql` на ваши данные).*

2.  **Установка зависимостей с помощью Poetry:**
    ```bash
    poetry install
    ```

3.  **Настройка базы данных:**
    * Убедитесь, что у вас установлен **PostgreSQL**.
    * Создайте файл **`.env`** в корневой директории проекта и укажите данные для подключения:
    ```
    DB_NAME=hh_vacancies
    DB_USER=postgres
    DB_PASSWORD=your_password
    DB_HOST=localhost
    ```
    *(Замените `your_password` на ваш пароль от PostgreSQL).*

4.  **Первый запуск программы (загрузка данных):**
    * При первом запуске **раскомментируйте** строки в файле `src/main.py`, которые отвечают за создание БД и загрузку данных.
    * Запустите программу:
    ```bash
    poetry run python -m src.main
    ```

5.  **Использование программы (после загрузки данных):**
    * **Закомментируйте** строки загрузки данных в `src/main.py`.
    * Запустите программу для работы с интерактивным интерфейсом:
    ```bash
    poetry run python -m src.main
    ```

---

## Тестирование

Для запуска тестов, которые проверяют функциональность `DBManager`, используйте следующую команду из корневой папки проекта:

```bash
poetry run python -m unittest tests.test_db_manager